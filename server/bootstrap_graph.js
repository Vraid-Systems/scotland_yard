// load initial data
Meteor.startup(function () {
    // board # to x,y screen positions
    if (Positions.find().count() === 0) {
        //PositionCoordinates are raw (x,y) pixel from looking at GIMP
        var PositionCoordinates = {
            1:[100,50],
            2:[261,20],
            3:[400,27],
            4:[473,31],
            5:[763,41],
            6:[849,45],
            7:[938,31],
            8:[68,111],
            9:[149,109],
            10:[353,98],
            11:[401,94],
            12:[445,91],
            13:[531,96],
            14:[617,71],
            15:[687,63],
            16:[781,97],
            17:[930,122],
            18:[36,141],
            19:[106,151],
            20:[188,127],
            21:[277,159],
            22:[412,169],
            23:[477,134],
            24:[583,130],
            25:[630,139],
            26:[695,97],
            27:[699,129],
            28:[738,122],
            29:[847,140],
            30:[988,149],
            31:[59,171],
            32:[153,190],
            33:[232,174],
            34:[359,189],
            35:[432,208],
            36:[460,207],
            37:[500,166],
            38:[609,174],
            39:[654,163],
            40:[723,188],
            41:[754,176],
            42:[933,186],
            43:[15,209],
            44:[113,229],
            45:[188,238],
            46:[240,221],
            47:[302,202],
            48:[375,240],
            49:[484,241],
            50:[539,212],
            51:[630,206],
            52:[684,196],
            53:[732,226],
            54:[768,214],
            55:[856,216],
            56:[967,229],
            57:[60,254],
            58:[139,256],
            59:[161,276],
            60:[202,270],
            61:[263,281],
            62:[299,274],
            63:[383,301],
            64:[434,290],
            65:[480,282],
            66:[508,275],
            67:[578,257],
            68:[650,256],
            69:[704,242],
            70:[768,258],
            71:[847,260],
            72:[914,261],
            73:[47,288],
            74:[80,322],
            75:[126,308],
            76:[189,304],
            77:[218,336],
            78:[277,326],
            79:[311,319],
            80:[396,339],
            81:[467,351],
            82:[495,331],
            83:[557,312],
            84:[617,282],
            85:[650,296],
            86:[715,310],
            87:[777,318],
            88:[801,328],
            89:[843,315],
            90:[887,313],
            91:[959,301],
            92:[25,353],
            93:[27,378],
            94:[89,362],
            95:[120,353],
            96:[260,387],
            97:[294,377],
            98:[334,363],
            99:[377,361],
            100:[449,379],
            101:[569,358],
            102:[596,326],
            103:[652,321],
            104:[713,343],
            105:[869,355],
            106:[926,366],
            107:[975,371],
            108:[858,415],
            109:[308,433],
            110:[372,392],
            111:[387,415],
            112:[406,401],
            113:[469,415],
            114:[527,396],
            115:[589,368],
            116:[714,410],
            117:[791,435],
            118:[716,456],
            119:[950,458],
            120:[23,511],
            121:[62,512],
            122:[110,507],
            123:[232,495],
            124:[303,479],
            125:[428,444],
            126:[557,417],
            127:[635,440],
            128:[755,572],
            129:[787,465],
            130:[411,485],
            131:[443,468],
            132:[523,448],
            133:[599,504],
            134:[668,479],
            135:[815,488],
            136:[933,531],
            137:[204,536],
            138:[329,513],
            139:[406,517],
            140:[526,502],
            141:[631,514],
            142:[713,525],
            143:[783,518],
            144:[39,602],
            145:[72,597],
            146:[121,591],
            147:[163,579],
            148:[204,573],
            149:[249,563],
            150:[296,552],
            151:[316,574],
            152:[349,538],
            153:[373,567],
            154:[455,545],
            155:[480,589],
            156:[534,589],
            157:[580,591],
            158:[657,561],
            159:[666,661],
            160:[808,584],
            161:[885,582],
            162:[977,582],
            163:[114,614],
            164:[163,615],
            165:[263,627],
            166:[353,604],
            167:[430,617],
            168:[461,638],
            169:[533,631],
            170:[576,621],
            171:[871,733],
            172:[728,634],
            173:[838,657],
            174:[924,628],
            175:[967,664],
            176:[18,662],
            177:[64,654],
            178:[139,642],
            179:[223,656],
            180:[227,665],
            181:[327,651],
            182:[349,662],
            183:[403,636],
            184:[502,671],
            185:[557,704],
            186:[615,697],
            187:[692,701],
            188:[792,689],
            189:[65,720],
            190:[109,748],
            191:[177,699],
            192:[181,759],
            193:[313,698],
            194:[331,717],
            195:[367,714],
            196:[429,681],
            197:[441,722],
            198:[657,755],
            199:[807,769]
        };
        for (var boardNumber in PositionCoordinates) {
            if (PositionCoordinates[boardNumber].length === 2) {
                Positions.insert({ //pre-process for use in plotting overlay
                    node: boardNumber,
                    x: (PositionCoordinates[boardNumber][0] - 20),
                    y: (PositionCoordinates[boardNumber][1] - 10)
                });
            }
        }
    }

    // underground
    if (Underground.find().count() === 0) {
        var UndergroundStops = {
            1:[46],
            13:[46,67,89],
            46:[1,13,79,74],
            74:[46],
            93:[79],
            79:[93,46,67,111],
            67:[79,13,89,111],
            89:[67,13,128,140],
            111:[79,67,153,163],
            163:[111,153],
            153:[163,111,140,185],
            140:[153,89,128],
            128:[140,89,185],
            185:[128,153]
        };
        Underground.putNodes(UndergroundStops);
    }

    //bus
    if (Bus.find().count() === 0) {
        var BusStops = {
            1:[58,46],
            3:[22,23],
            7:[42],
            13:[14,52,23],
            14:[13,15],
            15:[14,29,41],
            22:[3,23,65,34],
            23:[3,22,67,14],
            29:[15,41,42,55],
            34:[46,22,65],
            41:[15,29,87,52],
            42:[7,29,72],
            46:[1,58,34,78],
            52:[41,86,67,13],
            55:[29,89],
            58:[1,46,77,74],
            63:[34,65,100,79],
            65:[22,67,82,63],
            67:[23,52,102,82,65],
            72:[42,107,105],
            74:[58,94],
            77:[58,78,124,94],
            78:[46,79,77],
            79:[78,63],
            82:[65,67,140,100],
            86:[52,87,116,102],
            87:[41,105,86],
            89:[55,105],
            93:[94],
            94:[74,77,93],
            100:[63,82,111],
            102:[67,86,127],
            105:[89,72,107,108,87],
            107:[72,161,105],
            108:[105,135,116],
            111:[100,124],
            116:[86,108,142,127],
            122:[144,123],
            123:[122,124,165,144],
            124:[77,111,153,123],
            127:[102,116,133],
            128:[135,161,199,187,142],
            133:[127,157,140],
            135:[108,161,128],
            140:[82,133,156,154],
            142:[116,128,157],
            144:[122,123,163],
            153:[124,154,184,180],
            154:[140,156,153],
            156:[140,157,184,154],
            157:[133,142,185,156],
            161:[135,107,199,128],
            163:[144,191,176],
            165:[123,180,191],
            176:[163,190],
            180:[165,153,184,190],
            184:[153,156,185,180],
            185:[184,157,187],
            187:[128,185],
            190:[176,191,180],
            191:[163,165,190],
            199:[128,161]
        };
        Bus.putNodes(BusStops);
    }

    // taxi
    if (Taxi.find().count() === 0) {
        var TaxiStops = {
            1:[9,8],
            2:[10,20],
            3:[11,12,4],
            4:[3,13],
            5:[15,16],
            6:[29,7],
            7:[6,17],
            8:[18,19,1],
            9:[1,19,20],
            10:[2,11,34,21],
            11:[3,22,10],
            12:[3,23],
            13:[4,14,24,23],
            14:[13,15,25],
            15:[5,16,28,26,14],
            16:[5,29,28,15],
            17:[7,30,29],
            18:[8,31,43],
            19:[8,9,32],
            20:[2,33,9],
            21:[10,33],
            22:[11,23,35,34],
            23:[12,13,37,22],
            24:[13,38,37],
            25:[14,39,38],
            26:[15,27,39],
            27:[26,28,40],
            28:[15,16,41,27],
            29:[16,6,17,42,41],
            30:[17,42],
            31:[18,44,43],
            32:[19,33,45,44],
            33:[20,21,46,32],
            34:[10,22,48,47],
            35:[22,36,65,48],
            36:[35,37,49],
            37:[23,24,50,36],
            38:[24,25,51,50],
            39:[25,26,52,51],
            40:[27,41,53,52],
            41:[28,29,54,40],
            42:[30,56,72,29],
            43:[18,31,57],
            44:[31,32,58],
            45:[32,46,60,59,58],
            46:[33,47,61,45],
            47:[34,62,46],
            48:[34,35,63,62],
            49:[36,50,66],
            50:[37,38,49],
            51:[38,39,52,68,67],
            52:[39,40,69,51],
            53:[40,54,69],
            54:[41,55,70,53],
            55:[71,54],
            56:[42,91],
            57:[43,58,73],
            58:[44,45,59,75,74,57],
            59:[58,45,76,75],
            60:[45,61,76],
            61:[46,62,78,76,60],
            62:[47,48,79,61],
            63:[48,64,80,79],
            64:[65,81,63],
            65:[35,66,82,64],
            66:[49,67,82,65],
            67:[51,68,84,66],
            68:[51,69,85,67],
            69:[52,53,86,68],
            70:[54,71,87],
            71:[55,72,89,70],
            72:[42,91,90,71],
            73:[57,74,92],
            74:[73,58,75,92],
            75:[58,59,94,74],
            76:[59,60,61,77],
            77:[76,78,96,95],
            78:[61,79,97,77],
            79:[62,63,98,78],
            80:[63,100,99],
            81:[64,82,100],
            82:[65,66,101,81],
            83:[102,101],
            84:[67,85],
            85:[68,103,84],
            86:[69,104,103],
            87:[70,88],
            88:[87,89,117],
            89:[71,105,88],
            90:[72,91,105],
            91:[56,107,105,90,72],
            92:[73,74,93,],
            93:[92,94],
            94:[75,95,93],
            95:[77,122,94],
            96:[77,97,109],
            97:[78,98,109,96],
            98:[79,99,110,97],
            99:[80,112,110,98],
            100:[81,101,113,112,80],
            101:[82,83,114,100],
            102:[103,115,83],
            103:[85,86,102],
            104:[86,116],
            105:[89,90,91,106,108],
            106:[107,105],
            107:[91,119,106],
            108:[105,119,117],
            109:[96,97,110,124],
            110:[99,111,109,98],
            111:[110,112,124],
            112:[99,100,125,111],
            113:[100,114,125],
            114:[101,115,126,132,131,113],
            115:[102,127,126,114],
            116:[104,117,118,127],
            117:[88,108,129,116],
            118:[116,129,142,134],
            119:[107,136,108],
            120:[121,144],
            121:[120,122,145],
            122:[95,123,146,121],
            123:[124,149,148,137,122],
            124:[109,111,130,138,123],
            125:[112,113,131],
            126:[115,127,140,114],
            127:[115,116,134,133,126],
            128:[143,160,188,172,142],
            129:[117,135,143,142,118],
            130:[131,139,124],
            131:[125,114,130],
            132:[114,140],
            133:[127,141,140],
            134:[127,118,142,141],
            135:[129,136,161,143],
            136:[119,162,135],
            137:[123,147],
            138:[124,150,152],
            139:[130,140,154,153],
            140:[132,126,133,156,154,139],
            141:[134,142,158,133],
            142:[118,129,143,128,158,141,134],
            143:[135,160,128,142,129],
            144:[120,145,177],
            145:[121,146,144],
            146:[122,147,163,145],
            147:[137,164,146],
            148:[123,149,164],
            149:[123,150,165,148],
            150:[138,151,149],
            151:[152,166,165,150],
            152:[138,153,151],
            153:[139,154,167,166,152],
            154:[140,155,153,139],
            155:[154,156,168,167],
            156:[140,157,169,155],
            157:[158,170,156],
            158:[141,142,159,157],
            159:[158,172,198,186,170],
            160:[143,161,173,128],
            161:[135,174,160],
            162:[136,175],
            163:[146,177],
            164:[147,148,179,178],
            165:[149,151,180,179],
            166:[153,183,181,151],
            167:[155,168,183,153],
            168:[155,184,167],
            169:[156,184],
            170:[157,159,185],
            171:[173,175,199],
            172:[128,187,159],
            173:[160,174,171,188],
            174:[161,175,173],
            175:[162,171,174],
            176:[177,189],
            177:[144,163,176],
            178:[164,191,189],
            179:[164,165,191],
            180:[165,181,193],
            181:[166,182,193,180],
            182:[181,183,195],
            183:[167,196,182,166],
            184:[169,185,197,196,168],
            185:[170,186,184],
            186:[159,198,185],
            187:[172,188,198],
            188:[128,173,199,187],
            189:[176,178,190],
            190:[191,192,189],
            191:[178,179,192,190],
            192:[191,194,190],
            193:[181,194,180],
            194:[193,195,192],
            195:[182,197,194],
            196:[183,184,197],
            197:[196,184,195],
            198:[186,159,187,199],
            199:[188,171,198]
        };
        Taxi.putNodes(TaxiStops);
    }

    // black
    if (Black.find().count() === 0) {
        var BlackStops = {
            108:[115],
            115:[108,157],
            157:[115,194],
            194:[157]
        };
        Black.putNodes(BlackStops);
    }
});
